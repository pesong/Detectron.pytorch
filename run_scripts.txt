# train
python tools/train_net_step.py --dataset gaussian  \
--cfg configs/baselines/e2e_mask_rcnn_X-101-32x8d-FPN_1x.yaml \
--use_tfboard --bs 1 --nw 4


# train    faster_rcnn_R-50-FPN.yaml
python tools/train_net_step.py --dataset gaussian  \
--cfg configs/getting_started/tutorial_1gpu_e2e_faster_rcnn_R-50-FPN.yaml \
--use_tfboard --bs 1 --nw 4



# finetune    use detectron

python tools/train_net_step.py --dataset coco2017  \
--cfg configs/baselines/e2e_mask_rcnn_X-101-32x8d-FPN_1x.yaml \
--use_tfboard --bs 1 --nw 2 \
--load_detectron data/pretrained_model/e2e_mask_rcnn_X-101-32x8d-FPN_1x_CS.pkl


# finetune    use caffe checkpoint

python tools/train_net_step.py --dataset gaussian  \
--cfg configs/baselines/e2e_mask_rcnn_X-101-32x8d-FPN_1x.yaml \
--use_tfboard --bs 1 --nw 4 \
--load_ckpt data/pretrained_model/resnet101_caffe.pth




# inference

python tools/test_net.py --dataset gaussian \
--cfg configs/baselines/e2e_mask_rcnn_X-101-32x8d-FPN_1x.yaml \
--load_ckpt Outputs/e2e_mask_rcnn_X-101-32x8d-FPN_1x/Aug04-16-51-25_pesong_step/ckpt/model_step180.pth


# visualize

python tools/infer_simple.py --dataset coco \
--cfg configs/baselines/e2e_mask_rcnn_X-101-32x8d-FPN_1x.yaml \
--load_ckpt Outputs/e2e_mask_rcnn_X-101-32x8d-FPN_1x/Aug11-16-43-23_pesong_step/ckpt/model_step274.pth \
--image_dir demo/sample_images \
--output_dir infer_outputs



# convert original coco model to our own model

python lib/datasets/cityscapes/tools/convert_coco_model_to_cityscapes.py \
--coco_model  data/pretrained_model/e2e_mask_rcnn_X-101-32x8d-FPN_1x.pkl \
--output data/pretrained_model/e2e_mask_rcnn_X-101-32x8d-FPN_1x_CS.pkl


